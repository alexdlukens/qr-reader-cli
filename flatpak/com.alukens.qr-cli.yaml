id: com.alukens.qr-cli
runtime: org.freedesktop.Platform
runtime-version: "24.08"
sdk: org.freedesktop.Sdk
command: qr-cli
modules:
  - name: qr-cli
    buildsystem: simple
    build-commands:
      - pip3 install --verbose --no-index --find-links="file://${PWD}/vendor" --prefix=${FLATPAK_DEST} poetry-core
      - pip3 install --verbose --no-index --find-links="file://${PWD}/vendor" --prefix=${FLATPAK_DEST} -r requirements.txt
      - pip3 install --verbose --no-index --find-links="file://${PWD}/vendor" --prefix=${FLATPAK_DEST} --no-build-isolation .
    sources:
      - type: dir
        path: vendor
        dest: vendor
      - type: git
        url: https://github.com/alexdlukens/qr-reader-cli.git
        commit: 6e3f35a3ed62495e12e040cb82950be2ad3a10a5
finish-args:
  - --filesystem=home:ro
  - --device=all
